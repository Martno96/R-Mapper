{"ast":null,"code":"import * as g from '../../g/index.mjs';\nimport * as util from '../../util/index.mjs';\n\nfunction labelAttributes(opt1, opt2) {\n  return util.defaultsDeep({}, opt1, opt2, {\n    x: 0,\n    y: 0,\n    angle: 0,\n    attrs: {\n      '.': {\n        y: '0',\n        'text-anchor': 'start'\n      }\n    }\n  });\n}\n\nfunction outsideLayout(portPosition, elBBox, autoOrient, opt) {\n  opt = util.defaults({}, opt, {\n    offset: 15\n  });\n  var angle = elBBox.center().theta(portPosition);\n  var x = getBBoxAngles(elBBox);\n  var tx, ty, y, textAnchor;\n  var offset = opt.offset;\n  var orientAngle = 0;\n\n  if (angle < x[1] || angle > x[2]) {\n    y = '.3em';\n    tx = offset;\n    ty = 0;\n    textAnchor = 'start';\n  } else if (angle < x[0]) {\n    y = '0';\n    tx = 0;\n    ty = -offset;\n\n    if (autoOrient) {\n      orientAngle = -90;\n      textAnchor = 'start';\n    } else {\n      textAnchor = 'middle';\n    }\n  } else if (angle < x[3]) {\n    y = '.3em';\n    tx = -offset;\n    ty = 0;\n    textAnchor = 'end';\n  } else {\n    y = '.6em';\n    tx = 0;\n    ty = offset;\n\n    if (autoOrient) {\n      orientAngle = 90;\n      textAnchor = 'start';\n    } else {\n      textAnchor = 'middle';\n    }\n  }\n\n  var round = Math.round;\n  return labelAttributes({\n    x: round(tx),\n    y: round(ty),\n    angle: orientAngle,\n    attrs: {\n      '.': {\n        y: y,\n        'text-anchor': textAnchor\n      }\n    }\n  });\n}\n\nfunction getBBoxAngles(elBBox) {\n  var center = elBBox.center();\n  var tl = center.theta(elBBox.origin());\n  var bl = center.theta(elBBox.bottomLeft());\n  var br = center.theta(elBBox.corner());\n  var tr = center.theta(elBBox.topRight());\n  return [tl, tr, br, bl];\n}\n\nfunction insideLayout(portPosition, elBBox, autoOrient, opt) {\n  var angle = elBBox.center().theta(portPosition);\n  opt = util.defaults({}, opt, {\n    offset: 15\n  });\n  var tx, ty, y, textAnchor;\n  var offset = opt.offset;\n  var orientAngle = 0;\n  var bBoxAngles = getBBoxAngles(elBBox);\n\n  if (angle < bBoxAngles[1] || angle > bBoxAngles[2]) {\n    y = '.3em';\n    tx = -offset;\n    ty = 0;\n    textAnchor = 'end';\n  } else if (angle < bBoxAngles[0]) {\n    y = '.6em';\n    tx = 0;\n    ty = offset;\n\n    if (autoOrient) {\n      orientAngle = 90;\n      textAnchor = 'start';\n    } else {\n      textAnchor = 'middle';\n    }\n  } else if (angle < bBoxAngles[3]) {\n    y = '.3em';\n    tx = offset;\n    ty = 0;\n    textAnchor = 'start';\n  } else {\n    y = '0em';\n    tx = 0;\n    ty = -offset;\n\n    if (autoOrient) {\n      orientAngle = -90;\n      textAnchor = 'start';\n    } else {\n      textAnchor = 'middle';\n    }\n  }\n\n  var round = Math.round;\n  return labelAttributes({\n    x: round(tx),\n    y: round(ty),\n    angle: orientAngle,\n    attrs: {\n      '.': {\n        y: y,\n        'text-anchor': textAnchor\n      }\n    }\n  });\n}\n\nfunction radialLayout(portCenterOffset, autoOrient, opt) {\n  opt = util.defaults({}, opt, {\n    offset: 20\n  });\n  var origin = g.point(0, 0);\n  var angle = -portCenterOffset.theta(origin);\n  var orientAngle = angle;\n  var offset = portCenterOffset.clone().move(origin, opt.offset).difference(portCenterOffset).round();\n  var y = '.3em';\n  var textAnchor;\n\n  if ((angle + 90) % 180 === 0) {\n    textAnchor = autoOrient ? 'end' : 'middle';\n\n    if (!autoOrient && angle === -270) {\n      y = '0em';\n    }\n  } else if (angle > -270 && angle < -90) {\n    textAnchor = 'start';\n    orientAngle = angle - 180;\n  } else {\n    textAnchor = 'end';\n  }\n\n  var round = Math.round;\n  return labelAttributes({\n    x: round(offset.x),\n    y: round(offset.y),\n    angle: autoOrient ? orientAngle : 0,\n    attrs: {\n      '.': {\n        y: y,\n        'text-anchor': textAnchor\n      }\n    }\n  });\n}\n\nexport const manual = function (portPosition, elBBox, opt) {\n  return labelAttributes(opt, elBBox);\n};\nexport const left = function (portPosition, elBBox, opt) {\n  return labelAttributes(opt, {\n    x: -15,\n    attrs: {\n      '.': {\n        y: '.3em',\n        'text-anchor': 'end'\n      }\n    }\n  });\n};\nexport const right = function (portPosition, elBBox, opt) {\n  return labelAttributes(opt, {\n    x: 15,\n    attrs: {\n      '.': {\n        y: '.3em',\n        'text-anchor': 'start'\n      }\n    }\n  });\n};\nexport const top = function (portPosition, elBBox, opt) {\n  return labelAttributes(opt, {\n    y: -15,\n    attrs: {\n      '.': {\n        'text-anchor': 'middle'\n      }\n    }\n  });\n};\nexport const bottom = function (portPosition, elBBox, opt) {\n  return labelAttributes(opt, {\n    y: 15,\n    attrs: {\n      '.': {\n        y: '.6em',\n        'text-anchor': 'middle'\n      }\n    }\n  });\n};\nexport const outsideOriented = function (portPosition, elBBox, opt) {\n  return outsideLayout(portPosition, elBBox, true, opt);\n};\nexport const outside = function (portPosition, elBBox, opt) {\n  return outsideLayout(portPosition, elBBox, false, opt);\n};\nexport const insideOriented = function (portPosition, elBBox, opt) {\n  return insideLayout(portPosition, elBBox, true, opt);\n};\nexport const inside = function (portPosition, elBBox, opt) {\n  return insideLayout(portPosition, elBBox, false, opt);\n};\nexport const radial = function (portPosition, elBBox, opt) {\n  return radialLayout(portPosition.difference(elBBox.center()), false, opt);\n};\nexport const radialOriented = function (portPosition, elBBox, opt) {\n  return radialLayout(portPosition.difference(elBBox.center()), true, opt);\n};","map":{"version":3,"sources":["C:/Users/martn/Documents/New Documents 2019/Technigo codin/r-mapper v.2/r-mapper/node_modules/jointjs/src/layout/ports/portLabel.mjs"],"names":["g","util","labelAttributes","opt1","opt2","defaultsDeep","x","y","angle","attrs","outsideLayout","portPosition","elBBox","autoOrient","opt","defaults","offset","center","theta","getBBoxAngles","tx","ty","textAnchor","orientAngle","round","Math","tl","origin","bl","bottomLeft","br","corner","tr","topRight","insideLayout","bBoxAngles","radialLayout","portCenterOffset","point","clone","move","difference","manual","left","right","top","bottom","outsideOriented","outside","insideOriented","inside","radial","radialOriented"],"mappings":"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","sourcesContent":["import * as g from '../../g/index.mjs';\nimport * as util from '../../util/index.mjs';\n\nfunction labelAttributes(opt1, opt2) {\n\n    return util.defaultsDeep({}, opt1, opt2, {\n        x: 0,\n        y: 0,\n        angle: 0,\n        attrs: {\n            '.': {\n                y: '0',\n                'text-anchor': 'start'\n            }\n        }\n    });\n}\n\nfunction outsideLayout(portPosition, elBBox, autoOrient, opt) {\n\n    opt = util.defaults({}, opt, { offset: 15 });\n    var angle = elBBox.center().theta(portPosition);\n    var x = getBBoxAngles(elBBox);\n\n    var tx, ty, y, textAnchor;\n    var offset = opt.offset;\n    var orientAngle = 0;\n\n    if (angle < x[1] || angle > x[2]) {\n        y = '.3em';\n        tx = offset;\n        ty = 0;\n        textAnchor = 'start';\n    } else if (angle < x[0]) {\n        y = '0';\n        tx = 0;\n        ty = -offset;\n        if (autoOrient) {\n            orientAngle = -90;\n            textAnchor = 'start';\n        } else {\n            textAnchor = 'middle';\n        }\n    } else if (angle < x[3]) {\n        y = '.3em';\n        tx = -offset;\n        ty = 0;\n        textAnchor = 'end';\n    } else {\n        y = '.6em';\n        tx = 0;\n        ty = offset;\n        if (autoOrient) {\n            orientAngle = 90;\n            textAnchor = 'start';\n        } else {\n            textAnchor = 'middle';\n        }\n    }\n\n    var round = Math.round;\n    return labelAttributes({\n        x: round(tx),\n        y: round(ty),\n        angle: orientAngle,\n        attrs: {\n            '.': {\n                y: y,\n                'text-anchor': textAnchor\n            }\n        }\n    });\n}\n\nfunction getBBoxAngles(elBBox) {\n\n    var center = elBBox.center();\n\n    var tl = center.theta(elBBox.origin());\n    var bl = center.theta(elBBox.bottomLeft());\n    var br = center.theta(elBBox.corner());\n    var tr = center.theta(elBBox.topRight());\n\n    return [tl, tr, br, bl];\n}\n\nfunction insideLayout(portPosition, elBBox, autoOrient, opt) {\n\n    var angle = elBBox.center().theta(portPosition);\n    opt = util.defaults({}, opt, { offset: 15 });\n\n    var tx, ty, y, textAnchor;\n    var offset = opt.offset;\n    var orientAngle = 0;\n\n    var bBoxAngles = getBBoxAngles(elBBox);\n\n    if (angle < bBoxAngles[1] || angle > bBoxAngles[2]) {\n        y = '.3em';\n        tx = -offset;\n        ty = 0;\n        textAnchor = 'end';\n    } else if (angle < bBoxAngles[0]) {\n        y = '.6em';\n        tx = 0;\n        ty = offset;\n        if (autoOrient) {\n            orientAngle = 90;\n            textAnchor = 'start';\n        } else {\n            textAnchor = 'middle';\n        }\n    } else if (angle < bBoxAngles[3]) {\n        y = '.3em';\n        tx = offset;\n        ty = 0;\n        textAnchor = 'start';\n    } else {\n        y = '0em';\n        tx = 0;\n        ty = -offset;\n        if (autoOrient) {\n            orientAngle = -90;\n            textAnchor = 'start';\n        } else {\n            textAnchor = 'middle';\n        }\n    }\n\n    var round = Math.round;\n    return labelAttributes({\n        x: round(tx),\n        y: round(ty),\n        angle: orientAngle,\n        attrs: {\n            '.': {\n                y: y,\n                'text-anchor': textAnchor\n            }\n        }\n    });\n}\n\nfunction radialLayout(portCenterOffset, autoOrient, opt) {\n\n    opt = util.defaults({}, opt, { offset: 20 });\n\n    var origin = g.point(0, 0);\n    var angle = -portCenterOffset.theta(origin);\n    var orientAngle = angle;\n    var offset = portCenterOffset.clone()\n        .move(origin, opt.offset)\n        .difference(portCenterOffset)\n        .round();\n\n    var y = '.3em';\n    var textAnchor;\n\n    if ((angle + 90) % 180 === 0) {\n        textAnchor = autoOrient ? 'end' : 'middle';\n        if (!autoOrient && angle === -270) {\n            y = '0em';\n        }\n    } else if (angle > -270 && angle < -90) {\n        textAnchor = 'start';\n        orientAngle = angle - 180;\n    } else {\n        textAnchor = 'end';\n    }\n\n    var round = Math.round;\n    return labelAttributes({\n        x: round(offset.x),\n        y: round(offset.y),\n        angle: autoOrient ? orientAngle : 0,\n        attrs: {\n            '.': {\n                y: y,\n                'text-anchor': textAnchor\n            }\n        }\n    });\n}\n\nexport const manual = function(portPosition, elBBox, opt) {\n    return labelAttributes(opt, elBBox);\n};\n\nexport const left = function(portPosition, elBBox, opt) {\n    return labelAttributes(opt, { x: -15, attrs: { '.': { y: '.3em', 'text-anchor': 'end' }}});\n};\n\nexport const right = function(portPosition, elBBox, opt) {\n    return labelAttributes(opt, { x: 15, attrs: { '.': { y: '.3em', 'text-anchor': 'start' }}});\n};\n\nexport const top = function(portPosition, elBBox, opt) {\n    return labelAttributes(opt, { y: -15, attrs: { '.': { 'text-anchor': 'middle' }}});\n};\n\nexport const bottom = function(portPosition, elBBox, opt) {\n    return labelAttributes(opt, { y: 15, attrs: { '.': { y: '.6em', 'text-anchor': 'middle' }}});\n};\n\nexport const outsideOriented = function(portPosition, elBBox, opt) {\n    return outsideLayout(portPosition, elBBox, true, opt);\n};\n\nexport const outside = function(portPosition, elBBox, opt) {\n    return outsideLayout(portPosition, elBBox, false, opt);\n};\n\nexport const insideOriented = function(portPosition, elBBox, opt) {\n    return insideLayout(portPosition, elBBox, true, opt);\n};\n\nexport const inside = function(portPosition, elBBox, opt) {\n    return insideLayout(portPosition, elBBox, false, opt);\n};\n\nexport const radial = function(portPosition, elBBox, opt) {\n    return radialLayout(portPosition.difference(elBBox.center()), false, opt);\n};\n\nexport const radialOriented = function(portPosition, elBBox, opt) {\n    return radialLayout(portPosition.difference(elBBox.center()), true, opt);\n};\n\n"]},"metadata":{},"sourceType":"module"}