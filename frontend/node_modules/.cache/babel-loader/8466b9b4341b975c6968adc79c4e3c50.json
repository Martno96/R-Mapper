{"ast":null,"code":"import * as util from '../util/index.mjs';\n\nfunction abs2rel(value, max) {\n  if (max === 0) return '0%';\n  return Math.round(value / max * 100) + '%';\n}\n\nfunction pin(relative) {\n  return function (end, view, magnet, coords) {\n    var fn = view.isNodeConnection(magnet) ? pinnedLinkEnd : pinnedElementEnd;\n    return fn(relative, end, view, magnet, coords);\n  };\n}\n\nfunction pinnedElementEnd(relative, end, view, magnet, coords) {\n  var angle = view.model.angle();\n  var bbox = view.getNodeUnrotatedBBox(magnet);\n  var origin = view.model.getBBox().center();\n  coords.rotate(origin, angle);\n  var dx = coords.x - bbox.x;\n  var dy = coords.y - bbox.y;\n\n  if (relative) {\n    dx = abs2rel(dx, bbox.width);\n    dy = abs2rel(dy, bbox.height);\n  }\n\n  end.anchor = {\n    name: 'topLeft',\n    args: {\n      dx: dx,\n      dy: dy,\n      rotate: true\n    }\n  };\n  return end;\n}\n\nfunction pinnedLinkEnd(relative, end, view, _magnet, coords) {\n  var connection = view.getConnection();\n  if (!connection) return end;\n  var length = connection.closestPointLength(coords);\n\n  if (relative) {\n    var totalLength = connection.length();\n    end.anchor = {\n      name: 'connectionRatio',\n      args: {\n        ratio: length / totalLength\n      }\n    };\n  } else {\n    end.anchor = {\n      name: 'connectionLength',\n      args: {\n        length: length\n      }\n    };\n  }\n\n  return end;\n}\n\nexport const useDefaults = util.noop;\nexport const pinAbsolute = pin(false);\nexport const pinRelative = pin(true);","map":{"version":3,"sources":["C:/Users/martn/Documents/New Documents 2019/Technigo codin/r-mapper v.2/r-mapper/node_modules/jointjs/src/connectionStrategies/index.mjs"],"names":["util","abs2rel","value","max","Math","round","pin","relative","end","view","magnet","coords","fn","isNodeConnection","pinnedLinkEnd","pinnedElementEnd","angle","model","bbox","getNodeUnrotatedBBox","origin","getBBox","center","rotate","dx","x","dy","y","width","height","anchor","name","args","_magnet","connection","getConnection","length","closestPointLength","totalLength","ratio","useDefaults","noop","pinAbsolute","pinRelative"],"mappings":"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","sourcesContent":["import * as util from '../util/index.mjs';\n\nfunction abs2rel(value, max) {\n\n    if (max === 0) return '0%';\n    return Math.round(value / max * 100) + '%';\n}\n\nfunction pin(relative) {\n\n    return function(end, view, magnet, coords) {\n        var fn = (view.isNodeConnection(magnet)) ? pinnedLinkEnd : pinnedElementEnd;\n        return fn(relative, end, view, magnet, coords);\n    };\n}\n\nfunction pinnedElementEnd(relative, end, view, magnet, coords) {\n\n    var angle = view.model.angle();\n    var bbox = view.getNodeUnrotatedBBox(magnet);\n    var origin = view.model.getBBox().center();\n    coords.rotate(origin, angle);\n    var dx = coords.x - bbox.x;\n    var dy = coords.y - bbox.y;\n\n    if (relative) {\n        dx = abs2rel(dx, bbox.width);\n        dy = abs2rel(dy, bbox.height);\n    }\n\n    end.anchor = {\n        name: 'topLeft',\n        args: {\n            dx: dx,\n            dy: dy,\n            rotate: true\n        }\n    };\n\n    return end;\n}\n\nfunction pinnedLinkEnd(relative, end, view, _magnet, coords) {\n\n    var connection = view.getConnection();\n    if (!connection) return end;\n    var length = connection.closestPointLength(coords);\n    if (relative) {\n        var totalLength = connection.length();\n        end.anchor = {\n            name: 'connectionRatio',\n            args: {\n                ratio: length / totalLength\n            }\n        };\n    } else {\n        end.anchor = {\n            name: 'connectionLength',\n            args: {\n                length: length\n            }\n        };\n    }\n    return end;\n}\n\nexport const useDefaults = util.noop;\nexport const pinAbsolute = pin(false);\nexport const pinRelative = pin(true);\n\n"]},"metadata":{},"sourceType":"module"}