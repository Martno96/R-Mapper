{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nconst initialItems = localStorage.getItem('cast') ? JSON.parse(localStorage.getItem('cast')) : {\n  graph: {},\n  characters: [],\n  bonds: [{\n    source: \"bhjabsdjbdjas\",\n    target: \"sakbkabkdbksb\",\n    summary: \"lorem ipsum dolar sit amet?\"\n  }, {\n    source: \"vqweqwcxsadas\",\n    target: \"sakbkabkdbksb\",\n    summary: \"lorem IPSUUUUMMMM dolar sit amet!!!\"\n  }]\n};\nconst game = createSlice({\n  name: \"cast\",\n  initialState: initialItems,\n  reducers: {\n    setUsername: (store, action) => {\n      localStorage.setItem('username', JSON.stringify(action.payload));\n      store.username = action.payload;\n    }\n  }\n});\nexport const advance = input => {\n  let isStart = input.type ? false : true;\n  let endpoint = \"\";\n  let postBody = {};\n  return (dispatch, getState) => {\n    const state = getState();\n\n    if (isStart) {\n      endpoint = \"start\";\n      postBody = JSON.stringify({\n        username: input\n      });\n    } else {\n      endpoint = \"action\";\n      postBody = JSON.stringify({\n        username: state.game.username,\n        type: input.type,\n        direction: input.direction\n      });\n      dispatch(game.actions.logAction(JSON.parse(postBody)));\n    }\n\n    dispatch(game.actions.setLoadProgress(33));\n    fetch(`https://wk16-backend.herokuapp.com/${endpoint}`, {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },\n      body: postBody\n    }).then(res => {\n      dispatch(game.actions.setLoadProgress(55));\n      return res.json();\n    }).then(update => {\n      dispatch(game.actions.setLoadProgress(77));\n      return dispatch(game.actions.setGameState(update));\n    }).catch(error => dispatch(game.actions.setError(error.message))).finally(() => dispatch(game.actions.setLoadProgress(100)));\n  };\n};\nexport default game;","map":{"version":3,"sources":["C:/Users/martn/Documents/New Documents 2019/Technigo codin/storymapper spreadsheet/my-app/src/reducers/cast.js"],"names":["createSlice","initialItems","localStorage","getItem","JSON","parse","graph","characters","bonds","source","target","summary","game","name","initialState","reducers","setUsername","store","action","setItem","stringify","payload","username","advance","input","isStart","type","endpoint","postBody","dispatch","getState","state","direction","actions","logAction","setLoadProgress","fetch","method","headers","body","then","res","json","update","setGameState","catch","error","setError","message","finally"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit'\r\n\r\nconst initialItems = localStorage.getItem('cast')\r\n? JSON.parse(localStorage.getItem('cast'))\r\n: {\r\n  graph: {},\r\n  characters: [],\r\n  bonds: [\r\n    {\r\n      source: \"bhjabsdjbdjas\",\r\n      target: \"sakbkabkdbksb\",\r\n      summary: \"lorem ipsum dolar sit amet?\"\r\n    },\r\n    {\r\n      source: \"vqweqwcxsadas\",\r\n      target: \"sakbkabkdbksb\",\r\n      summary: \"lorem IPSUUUUMMMM dolar sit amet!!!\"\r\n    }\r\n  ]\r\n}\r\n\r\nconst game = createSlice ({\r\n  name: \"cast\",\r\n  initialState: initialItems,\r\n  reducers: {\r\n    setUsername: (store, action) => {\r\n      localStorage.setItem('username', JSON.stringify(action.payload))\r\n      store.username = action.payload\r\n    }\r\n  }\r\n})\r\n\r\nexport const advance = (input) => {\r\n  let isStart = input.type ? false : true\r\n  let endpoint = \"\"\r\n  let postBody = {}\r\n\r\n  return (dispatch, getState) => {\r\n    const state = getState()\r\n    if (isStart) {\r\n      endpoint = \"start\"\r\n      postBody = JSON.stringify({\r\n        username: input\r\n      })\r\n    } else {\r\n      endpoint = \"action\"\r\n      postBody = JSON.stringify({\r\n        username: state.game.username,\r\n        type: input.type,\r\n        direction: input.direction\r\n      })\r\n      dispatch(game.actions.logAction(JSON.parse(postBody)))\r\n    }\r\n    dispatch(game.actions.setLoadProgress(33))\r\n    fetch(`https://wk16-backend.herokuapp.com/${endpoint}`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json;charset=utf-8'\r\n      },\r\n      body: postBody\r\n    })\r\n      .then(res => {\r\n        dispatch(game.actions.setLoadProgress(55))\r\n        return res.json()\r\n      })\r\n      .then(update => {\r\n        dispatch(game.actions.setLoadProgress(77))\r\n        return dispatch(game.actions.setGameState(update))\r\n      })\r\n      .catch(error => dispatch(game.actions.setError(error.message)))\r\n      .finally(() => dispatch(game.actions.setLoadProgress(100))) \r\n    }\r\n}\r\n\r\nexport default game"]},"metadata":{},"sourceType":"module"}