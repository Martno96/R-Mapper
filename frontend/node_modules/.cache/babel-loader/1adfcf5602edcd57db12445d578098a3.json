{"ast":null,"code":"import { assign } from '../util/index.mjs';\nimport V from '../V/index.mjs';\nimport { HighlighterView } from '../dia/HighlighterView.mjs';\nexport const stroke = HighlighterView.extend({\n  tagName: 'path',\n  className: 'highlight-stroke',\n  attributes: {\n    'pointer-events': 'none',\n    'vector-effect': 'non-scaling-stroke',\n    'fill': 'none'\n  },\n  options: {\n    padding: 3,\n    rx: 0,\n    ry: 0,\n    useFirstSubpath: false,\n    attrs: {\n      'stroke-width': 3,\n      'stroke': '#FEB663'\n    }\n  },\n\n  getPathData(cellView, node) {\n    const {\n      options\n    } = this;\n    const {\n      useFirstSubpath\n    } = options;\n    let d;\n\n    try {\n      const vNode = V(node);\n      d = vNode.convertToPathData().trim();\n\n      if (vNode.tagName() === 'PATH' && useFirstSubpath) {\n        const secondSubpathIndex = d.search(/.M/i) + 1;\n\n        if (secondSubpathIndex > 0) {\n          d = d.substr(0, secondSubpathIndex);\n        }\n      }\n    } catch (error) {\n      // Failed to get path data from magnet element.\n      // Draw a rectangle around the node instead.\n      const nodeBBox = cellView.getNodeBoundingRect(node);\n      d = V.rectToPath(assign({}, options, nodeBBox.toJSON()));\n    }\n\n    return d;\n  },\n\n  highlightConnection(cellView) {\n    this.vel.attr('d', cellView.getSerializedConnection());\n  },\n\n  highlightNode(cellView, node) {\n    const {\n      vel,\n      options\n    } = this;\n    const {\n      padding,\n      layer\n    } = options;\n    let highlightMatrix = cellView.getNodeMatrix(node); // Add padding to the highlight element.\n\n    if (padding) {\n      if (!layer && node === cellView.el) {\n        // If the highlighter is appended to the cellView\n        // and we measure the size of the cellView wrapping group\n        // it's necessary to remove the highlighter first\n        vel.remove();\n      }\n\n      let nodeBBox = cellView.getNodeBoundingRect(node);\n      const cx = nodeBBox.x + nodeBBox.width / 2;\n      const cy = nodeBBox.y + nodeBBox.height / 2;\n      nodeBBox = V.transformRect(nodeBBox, highlightMatrix);\n      const width = Math.max(nodeBBox.width, 1);\n      const height = Math.max(nodeBBox.height, 1);\n      const sx = (width + padding) / width;\n      const sy = (height + padding) / height;\n      const paddingMatrix = V.createSVGMatrix({\n        a: sx,\n        b: 0,\n        c: 0,\n        d: sy,\n        e: cx - sx * cx,\n        f: cy - sy * cy\n      });\n      highlightMatrix = highlightMatrix.multiply(paddingMatrix);\n    }\n\n    vel.attr({\n      'd': this.getPathData(cellView, node),\n      'transform': V.matrixToTransformString(highlightMatrix)\n    });\n  },\n\n  highlight(cellView, node) {\n    const {\n      vel,\n      options\n    } = this;\n    vel.attr(options.attrs);\n\n    if (cellView.isNodeConnection(node)) {\n      this.highlightConnection(cellView);\n    } else {\n      this.highlightNode(cellView, node);\n    }\n  }\n\n});","map":{"version":3,"sources":["C:/Users/martn/Documents/New Documents 2019/Technigo codin/storymapper spreadsheet/my-app/node_modules/jointjs/src/highlighters/stroke.mjs"],"names":["assign","V","HighlighterView","stroke","extend","tagName","className","attributes","options","padding","rx","ry","useFirstSubpath","attrs","getPathData","cellView","node","d","vNode","convertToPathData","trim","secondSubpathIndex","search","substr","error","nodeBBox","getNodeBoundingRect","rectToPath","toJSON","highlightConnection","vel","attr","getSerializedConnection","highlightNode","layer","highlightMatrix","getNodeMatrix","el","remove","cx","x","width","cy","y","height","transformRect","Math","max","sx","sy","paddingMatrix","createSVGMatrix","a","b","c","e","f","multiply","matrixToTransformString","highlight","isNodeConnection"],"mappings":"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","sourcesContent":["import { assign } from '../util/index.mjs';\nimport V from '../V/index.mjs';\nimport { HighlighterView } from '../dia/HighlighterView.mjs';\n\nexport const stroke = HighlighterView.extend({\n\n    tagName: 'path',\n    className: 'highlight-stroke',\n    attributes: {\n        'pointer-events': 'none',\n        'vector-effect': 'non-scaling-stroke',\n        'fill': 'none'\n    },\n\n    options: {\n        padding: 3,\n        rx: 0,\n        ry: 0,\n        useFirstSubpath: false,\n        attrs: {\n            'stroke-width': 3,\n            'stroke': '#FEB663'\n        }\n    },\n\n    getPathData(cellView, node) {\n        const { options } = this;\n        const { useFirstSubpath } = options;\n        let d;\n        try {\n            const vNode = V(node);\n            d = vNode.convertToPathData().trim();\n            if (vNode.tagName() === 'PATH' && useFirstSubpath) {\n                const secondSubpathIndex = d.search(/.M/i) + 1;\n                if (secondSubpathIndex > 0) {\n                    d = d.substr(0, secondSubpathIndex);\n                }\n            }\n        } catch (error) {\n            // Failed to get path data from magnet element.\n            // Draw a rectangle around the node instead.\n            const nodeBBox = cellView.getNodeBoundingRect(node);\n            d = V.rectToPath(assign({}, options, nodeBBox.toJSON()));\n        }\n        return d;\n    },\n\n    highlightConnection(cellView) {\n        this.vel.attr('d', cellView.getSerializedConnection());\n    },\n\n    highlightNode(cellView, node) {\n        const { vel, options } = this;\n        const { padding, layer } = options;\n        let highlightMatrix = cellView.getNodeMatrix(node);\n        // Add padding to the highlight element.\n        if (padding) {\n            if (!layer && node === cellView.el) {\n                // If the highlighter is appended to the cellView\n                // and we measure the size of the cellView wrapping group\n                // it's necessary to remove the highlighter first\n                vel.remove();\n            }\n            let nodeBBox = cellView.getNodeBoundingRect(node);\n            const cx = nodeBBox.x + (nodeBBox.width / 2);\n            const cy = nodeBBox.y + (nodeBBox.height / 2);\n            nodeBBox = V.transformRect(nodeBBox, highlightMatrix);\n            const width = Math.max(nodeBBox.width, 1);\n            const height = Math.max(nodeBBox.height, 1);\n            const sx = (width + padding) / width;\n            const sy = (height + padding) / height;\n            const paddingMatrix = V.createSVGMatrix({\n                a: sx,\n                b: 0,\n                c: 0,\n                d: sy,\n                e: cx - sx * cx,\n                f: cy - sy * cy\n            });\n            highlightMatrix = highlightMatrix.multiply(paddingMatrix);\n        }\n        vel.attr({\n            'd': this.getPathData(cellView, node),\n            'transform': V.matrixToTransformString(highlightMatrix)\n        });\n    },\n\n    highlight(cellView, node) {\n        const { vel, options } = this;\n        vel.attr(options.attrs);\n        if (cellView.isNodeConnection(node)) {\n            this.highlightConnection(cellView);\n        } else {\n            this.highlightNode(cellView, node);\n        }\n    }\n\n});\n"]},"metadata":{},"sourceType":"module"}