{"ast":null,"code":"import { Generic } from './basic.mjs';\nimport { ElementView } from '../dia/ElementView.mjs';\nimport V from '../V/index.mjs';\nimport { Link as diaLink } from '../dia/Link.mjs';\nexport const Place = Generic.define('pn.Place', {\n  size: {\n    width: 50,\n    height: 50\n  },\n  attrs: {\n    '.root': {\n      r: 25,\n      fill: '#ffffff',\n      stroke: '#000000',\n      transform: 'translate(25, 25)'\n    },\n    '.label': {\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-y': -20,\n      ref: '.root',\n      fill: '#000000',\n      'font-size': 12\n    },\n    '.tokens > circle': {\n      fill: '#000000',\n      r: 5\n    },\n    '.tokens.one > circle': {\n      transform: 'translate(25, 25)'\n    },\n    '.tokens.two > circle:nth-child(1)': {\n      transform: 'translate(19, 25)'\n    },\n    '.tokens.two > circle:nth-child(2)': {\n      transform: 'translate(31, 25)'\n    },\n    '.tokens.three > circle:nth-child(1)': {\n      transform: 'translate(18, 29)'\n    },\n    '.tokens.three > circle:nth-child(2)': {\n      transform: 'translate(25, 19)'\n    },\n    '.tokens.three > circle:nth-child(3)': {\n      transform: 'translate(32, 29)'\n    },\n    '.tokens.alot > text': {\n      transform: 'translate(25, 18)',\n      'text-anchor': 'middle',\n      fill: '#000000'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"root\"/><g class=\"tokens\" /></g><text class=\"label\"/></g>'\n});\nexport const PlaceView = ElementView.extend({\n  presentationAttributes: ElementView.addPresentationAttributes({\n    tokens: ['TOKENS']\n  }),\n  initFlag: ElementView.prototype.initFlag.concat(['TOKENS']),\n  confirmUpdate: function (...args) {\n    let flags = ElementView.prototype.confirmUpdate.call(this, ...args);\n\n    if (this.hasFlag(flags, 'TOKENS')) {\n      this.renderTokens();\n      this.update();\n      flags = this.removeFlag(flags, 'TOKENS');\n    }\n\n    return flags;\n  },\n  renderTokens: function () {\n    const vTokens = this.vel.findOne('.tokens').empty();\n    ['one', 'two', 'three', 'alot'].forEach(function (className) {\n      vTokens.removeClass(className);\n    });\n    var tokens = this.model.get('tokens');\n    if (!tokens) return;\n\n    switch (tokens) {\n      case 1:\n        vTokens.addClass('one');\n        vTokens.append(V('circle'));\n        break;\n\n      case 2:\n        vTokens.addClass('two');\n        vTokens.append([V('circle'), V('circle')]);\n        break;\n\n      case 3:\n        vTokens.addClass('three');\n        vTokens.append([V('circle'), V('circle'), V('circle')]);\n        break;\n\n      default:\n        vTokens.addClass('alot');\n        vTokens.append(V('text').text(tokens + ''));\n        break;\n    }\n  }\n});\nexport const Transition = Generic.define('pn.Transition', {\n  size: {\n    width: 12,\n    height: 50\n  },\n  attrs: {\n    'rect': {\n      width: 12,\n      height: 50,\n      fill: '#000000',\n      stroke: '#000000'\n    },\n    '.label': {\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-y': -20,\n      ref: 'rect',\n      fill: '#000000',\n      'font-size': 12\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"root\"/></g></g><text class=\"label\"/>'\n});\nexport const Link = diaLink.define('pn.Link', {\n  attrs: {\n    '.marker-target': {\n      d: 'M 10 0 L 0 5 L 10 10 z'\n    }\n  }\n});","map":{"version":3,"sources":["C:/Users/martn/Documents/New Documents 2019/Technigo codin/r-mapper v.2/r-mapper/node_modules/jointjs/src/shapes/pn.mjs"],"names":["Generic","ElementView","V","Link","diaLink","Place","define","size","width","height","attrs","r","fill","stroke","transform","ref","markup","PlaceView","extend","presentationAttributes","addPresentationAttributes","tokens","initFlag","prototype","concat","confirmUpdate","args","flags","call","hasFlag","renderTokens","update","removeFlag","vTokens","vel","findOne","empty","forEach","className","removeClass","model","get","addClass","append","text","Transition","d"],"mappings":"AAAA,SAASA,OAAT,QAAwB,aAAxB;AACA,SAASC,WAAT,QAA4B,wBAA5B;AACA,OAAOC,CAAP,MAAc,gBAAd;AACA,SAASC,IAAI,IAAIC,OAAjB,QAAgC,iBAAhC;AAEA,OAAO,MAAMC,KAAK,GAAGL,OAAO,CAACM,MAAR,CAAe,UAAf,EAA2B;AAC5CC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,KAAK,EAAE,EAAT;AAAaC,IAAAA,MAAM,EAAE;AAArB,GADsC;AAE5CC,EAAAA,KAAK,EAAE;AACH,aAAS;AACLC,MAAAA,CAAC,EAAE,EADE;AAELC,MAAAA,IAAI,EAAE,SAFD;AAGLC,MAAAA,MAAM,EAAE,SAHH;AAILC,MAAAA,SAAS,EAAE;AAJN,KADN;AAOH,cAAU;AACN,qBAAe,QADT;AAEN,eAAS,EAFH;AAGN,eAAS,CAAC,EAHJ;AAINC,MAAAA,GAAG,EAAE,OAJC;AAKNH,MAAAA,IAAI,EAAE,SALA;AAMN,mBAAa;AANP,KAPP;AAeH,wBAAoB;AAChBA,MAAAA,IAAI,EAAE,SADU;AAEhBD,MAAAA,CAAC,EAAE;AAFa,KAfjB;AAmBH,4BAAwB;AAAEG,MAAAA,SAAS,EAAE;AAAb,KAnBrB;AAqBH,yCAAqC;AAAEA,MAAAA,SAAS,EAAE;AAAb,KArBlC;AAsBH,yCAAqC;AAAEA,MAAAA,SAAS,EAAE;AAAb,KAtBlC;AAwBH,2CAAuC;AAAEA,MAAAA,SAAS,EAAE;AAAb,KAxBpC;AAyBH,2CAAuC;AAAEA,MAAAA,SAAS,EAAE;AAAb,KAzBpC;AA0BH,2CAAuC;AAAEA,MAAAA,SAAS,EAAE;AAAb,KA1BpC;AA4BH,2BAAuB;AACnBA,MAAAA,SAAS,EAAE,mBADQ;AAEnB,qBAAe,QAFI;AAGnBF,MAAAA,IAAI,EAAE;AAHa;AA5BpB;AAFqC,CAA3B,EAoClB;AACCI,EAAAA,MAAM,EAAE;AADT,CApCkB,CAAd;AAwCP,OAAO,MAAMC,SAAS,GAAGhB,WAAW,CAACiB,MAAZ,CAAmB;AAExCC,EAAAA,sBAAsB,EAAElB,WAAW,CAACmB,yBAAZ,CAAsC;AAC1DC,IAAAA,MAAM,EAAE,CAAC,QAAD;AADkD,GAAtC,CAFgB;AAMxCC,EAAAA,QAAQ,EAAErB,WAAW,CAACsB,SAAZ,CAAsBD,QAAtB,CAA+BE,MAA/B,CAAsC,CAAC,QAAD,CAAtC,CAN8B;AAQxCC,EAAAA,aAAa,EAAE,UAAS,GAAGC,IAAZ,EAAkB;AAC7B,QAAIC,KAAK,GAAG1B,WAAW,CAACsB,SAAZ,CAAsBE,aAAtB,CAAoCG,IAApC,CAAyC,IAAzC,EAA+C,GAAGF,IAAlD,CAAZ;;AACA,QAAI,KAAKG,OAAL,CAAaF,KAAb,EAAoB,QAApB,CAAJ,EAAmC;AAC/B,WAAKG,YAAL;AACA,WAAKC,MAAL;AACAJ,MAAAA,KAAK,GAAG,KAAKK,UAAL,CAAgBL,KAAhB,EAAuB,QAAvB,CAAR;AACH;;AACD,WAAOA,KAAP;AACH,GAhBuC;AAkBxCG,EAAAA,YAAY,EAAE,YAAW;AAErB,UAAMG,OAAO,GAAG,KAAKC,GAAL,CAASC,OAAT,CAAiB,SAAjB,EAA4BC,KAA5B,EAAhB;AACA,KAAC,KAAD,EAAQ,KAAR,EAAe,OAAf,EAAwB,MAAxB,EAAgCC,OAAhC,CAAwC,UAASC,SAAT,EAAoB;AACxDL,MAAAA,OAAO,CAACM,WAAR,CAAoBD,SAApB;AACH,KAFD;AAIA,QAAIjB,MAAM,GAAG,KAAKmB,KAAL,CAAWC,GAAX,CAAe,QAAf,CAAb;AACA,QAAI,CAACpB,MAAL,EAAa;;AAEb,YAAQA,MAAR;AAEI,WAAK,CAAL;AACIY,QAAAA,OAAO,CAACS,QAAR,CAAiB,KAAjB;AACAT,QAAAA,OAAO,CAACU,MAAR,CAAezC,CAAC,CAAC,QAAD,CAAhB;AACA;;AAEJ,WAAK,CAAL;AACI+B,QAAAA,OAAO,CAACS,QAAR,CAAiB,KAAjB;AACAT,QAAAA,OAAO,CAACU,MAAR,CAAe,CAACzC,CAAC,CAAC,QAAD,CAAF,EAAcA,CAAC,CAAC,QAAD,CAAf,CAAf;AACA;;AAEJ,WAAK,CAAL;AACI+B,QAAAA,OAAO,CAACS,QAAR,CAAiB,OAAjB;AACAT,QAAAA,OAAO,CAACU,MAAR,CAAe,CAACzC,CAAC,CAAC,QAAD,CAAF,EAAcA,CAAC,CAAC,QAAD,CAAf,EAA2BA,CAAC,CAAC,QAAD,CAA5B,CAAf;AACA;;AAEJ;AACI+B,QAAAA,OAAO,CAACS,QAAR,CAAiB,MAAjB;AACAT,QAAAA,OAAO,CAACU,MAAR,CAAezC,CAAC,CAAC,MAAD,CAAD,CAAU0C,IAAV,CAAevB,MAAM,GAAG,EAAxB,CAAf;AACA;AApBR;AAsBH;AAlDuC,CAAnB,CAAlB;AAqDP,OAAO,MAAMwB,UAAU,GAAG7C,OAAO,CAACM,MAAR,CAAe,eAAf,EAAgC;AACtDC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,KAAK,EAAE,EAAT;AAAaC,IAAAA,MAAM,EAAE;AAArB,GADgD;AAEtDC,EAAAA,KAAK,EAAE;AACH,YAAQ;AACJF,MAAAA,KAAK,EAAE,EADH;AAEJC,MAAAA,MAAM,EAAE,EAFJ;AAGJG,MAAAA,IAAI,EAAE,SAHF;AAIJC,MAAAA,MAAM,EAAE;AAJJ,KADL;AAOH,cAAU;AACN,qBAAe,QADT;AAEN,eAAS,EAFH;AAGN,eAAS,CAAC,EAHJ;AAINE,MAAAA,GAAG,EAAE,MAJC;AAKNH,MAAAA,IAAI,EAAE,SALA;AAMN,mBAAa;AANP;AAPP;AAF+C,CAAhC,EAkBvB;AACCI,EAAAA,MAAM,EAAE;AADT,CAlBuB,CAAnB;AAsBP,OAAO,MAAMb,IAAI,GAAGC,OAAO,CAACE,MAAR,CAAe,SAAf,EAA0B;AAC1CI,EAAAA,KAAK,EAAE;AAAE,sBAAkB;AAAEoC,MAAAA,CAAC,EAAE;AAAL;AAApB;AADmC,CAA1B,CAAb","sourcesContent":["import { Generic } from './basic.mjs';\nimport { ElementView } from '../dia/ElementView.mjs';\nimport V from '../V/index.mjs';\nimport { Link as diaLink } from '../dia/Link.mjs';\n\nexport const Place = Generic.define('pn.Place', {\n    size: { width: 50, height: 50 },\n    attrs: {\n        '.root': {\n            r: 25,\n            fill: '#ffffff',\n            stroke: '#000000',\n            transform: 'translate(25, 25)'\n        },\n        '.label': {\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-y': -20,\n            ref: '.root',\n            fill: '#000000',\n            'font-size': 12\n        },\n        '.tokens > circle': {\n            fill: '#000000',\n            r: 5\n        },\n        '.tokens.one > circle': { transform: 'translate(25, 25)' },\n\n        '.tokens.two > circle:nth-child(1)': { transform: 'translate(19, 25)' },\n        '.tokens.two > circle:nth-child(2)': { transform: 'translate(31, 25)' },\n\n        '.tokens.three > circle:nth-child(1)': { transform: 'translate(18, 29)' },\n        '.tokens.three > circle:nth-child(2)': { transform: 'translate(25, 19)' },\n        '.tokens.three > circle:nth-child(3)': { transform: 'translate(32, 29)' },\n\n        '.tokens.alot > text': {\n            transform: 'translate(25, 18)',\n            'text-anchor': 'middle',\n            fill: '#000000'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"root\"/><g class=\"tokens\" /></g><text class=\"label\"/></g>',\n});\n\nexport const PlaceView = ElementView.extend({\n\n    presentationAttributes: ElementView.addPresentationAttributes({\n        tokens: ['TOKENS']\n    }),\n\n    initFlag: ElementView.prototype.initFlag.concat(['TOKENS']),\n\n    confirmUpdate: function(...args) {\n        let flags = ElementView.prototype.confirmUpdate.call(this, ...args);\n        if (this.hasFlag(flags, 'TOKENS')) {\n            this.renderTokens();\n            this.update();\n            flags = this.removeFlag(flags, 'TOKENS');\n        }\n        return flags;\n    },\n\n    renderTokens: function() {\n\n        const vTokens = this.vel.findOne('.tokens').empty();\n        ['one', 'two', 'three', 'alot'].forEach(function(className) {\n            vTokens.removeClass(className);\n        });\n\n        var tokens = this.model.get('tokens');\n        if (!tokens) return;\n\n        switch (tokens) {\n\n            case 1:\n                vTokens.addClass('one');\n                vTokens.append(V('circle'));\n                break;\n\n            case 2:\n                vTokens.addClass('two');\n                vTokens.append([V('circle'), V('circle')]);\n                break;\n\n            case 3:\n                vTokens.addClass('three');\n                vTokens.append([V('circle'), V('circle'), V('circle')]);\n                break;\n\n            default:\n                vTokens.addClass('alot');\n                vTokens.append(V('text').text(tokens + ''));\n                break;\n        }\n    }\n});\n\nexport const Transition = Generic.define('pn.Transition', {\n    size: { width: 12, height: 50 },\n    attrs: {\n        'rect': {\n            width: 12,\n            height: 50,\n            fill: '#000000',\n            stroke: '#000000'\n        },\n        '.label': {\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-y': -20,\n            ref: 'rect',\n            fill: '#000000',\n            'font-size': 12\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"root\"/></g></g><text class=\"label\"/>',\n});\n\nexport const Link = diaLink.define('pn.Link', {\n    attrs: { '.marker-target': { d: 'M 10 0 L 0 5 L 10 10 z' }}\n});\n"]},"metadata":{},"sourceType":"module"}